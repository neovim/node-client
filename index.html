<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>neovim</title><meta name="description" content="Documentation for neovim"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">neovim</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>neovim</h2></div><div class="tsd-panel tsd-typography"><a id="md:neovim-nodejs-client" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Neovim node.js client<a href="#md:neovim-nodejs-client" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><table>
<thead>
<tr>
<th>CI (node &gt;= 14, Linux/macOS/Windows)</th>
<th>Coverage</th>
<th>npm</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/neovim/node-client/actions/workflows/ci.yml"><img src="https://github.com/neovim/node-client/actions/workflows/ci.yml/badge.svg" alt="ci"></a></td>
<td><a href="https://codecov.io/gh/neovim/node-client"><img src="https://codecov.io/gh/neovim/node-client/branch/master/graph/badge.svg" alt="Coverage Badge"></a></td>
<td><a href="https://www.npmjs.com/package/neovim"><img src="https://img.shields.io/npm/v/neovim.svg" alt="npm version"></a></td>
</tr>
</tbody>
</table>
<a id="md:install" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Install<a href="#md:install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For &quot;remote plugins&quot;, the Nvim <a href="https://neovim.io/doc/user/provider.html#provider-nodejs">Node.js provider</a> expects the <code>neovim</code> package to be globally installed:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-3">-g</span><span class="hl-1"> </span><span class="hl-2">neovim</span>
</code><button type="button">Copy</button></pre>

<p>Or for non-plugin purposes, <code>neovim</code> works like any other NPM package.
See below for a quickstart example that you can copy and run immediately.</p>
<a id="md:usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage<a href="#md:usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:functions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Functions<a href="#md:functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>neovim</code> package provides these functions:</p>
<ul>
<li><code>attach()</code>: The primary interface. Takes a process, socket, or pair of write/read streams and returns a <code>NeovimClient</code> connected to an <code>nvim</code> process.</li>
<li><code>findNvim()</code>: Tries to find a usable <code>nvim</code> binary on the current system.</li>
</ul>
<a id="md:logging" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Logging<a href="#md:logging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>At load-time, the <code>neovim</code> module replaces (&quot;monkey patches&quot;) <code>console</code> with its <code>logger</code>
interface, so <code>console.log</code> will call <code>logger.info</code> instead of writing to stdout (which would
break the stdio RPC channel).
<ul>
<li>To skip this patching of <code>console.log</code>, pass a custom <code>logger</code> to <code>attach()</code>.</li>
<li>Best practice in any case is to use the <code>logger</code> available from the <code>NeovimClient</code> returned by
<code>attach()</code>, instead of <code>console</code> logging functions.</li>
</ul>
</li>
<li>Set the <code>$NVIM_NODE_LOG_FILE</code> env var to (also) write logs to a file.</li>
<li>Set the <code>$ALLOW_CONSOLE</code> env var to (also) write logs to stdout. <strong>This will break any (stdio) RPC
channel</strong> because logs written to stdout are invalid RPC messages.</li>
</ul>
<a id="md:quickstart-connect-to-nvim" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Quickstart: connect to Nvim<a href="#md:quickstart-connect-to-nvim" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Following is a complete, working example.</p>
<ol>
<li>Install the <code>neovim</code> package <em>locally</em> in any directory (i.e. without <code>-g</code>. Node throws <code>ERR_MODULE_NOT_FOUND</code> if a script imports a <em>globally</em> installed package).<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">neovim</span>
</code><button type="button">Copy</button></pre>

</li>
<li>Paste the script below into a <code>demo.mjs</code> file and run it!<pre><code><span class="hl-4">ALLOW_CONSOLE</span><span class="hl-1">=</span><span class="hl-5">1</span><span class="hl-1"> </span><span class="hl-6">node</span><span class="hl-1"> </span><span class="hl-6">demo</span><span class="hl-1">.</span><span class="hl-6">mjs</span>
</code><button>Copy</button></pre>

<ul>
<li><code>$ALLOW_CONSOLE</code> env var must be set, because logs are normally not printed to stdout.
<ul>
<li>Note: <code>$ALLOW_CONSOLE</code> is only for demo purposes. It cannot be used for remote plugins or
whenever stdio is an RPC channel, because writing logs to stdout would break the RPC
channel.</li>
</ul>
</li>
<li>Script:</li>
</ul>
<pre><code class="js"><span class="hl-7">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-6">child_process</span><span class="hl-1"> </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:child_process&#39;</span><br/><span class="hl-7">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-7">as</span><span class="hl-1"> </span><span class="hl-6">assert</span><span class="hl-1"> </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;node:assert&#39;</span><br/><span class="hl-7">import</span><span class="hl-1"> { </span><span class="hl-6">attach</span><span class="hl-1">, </span><span class="hl-6">findNvim</span><span class="hl-1"> } </span><span class="hl-7">from</span><span class="hl-1"> </span><span class="hl-2">&#39;neovim&#39;</span><br/><br/><span class="hl-8">// Find `nvim` on the system and open a channel to it.</span><br/><span class="hl-1">(</span><span class="hl-3">async</span><span class="hl-1"> </span><span class="hl-3">function</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">found</span><span class="hl-1"> = </span><span class="hl-0">findNvim</span><span class="hl-1">({ </span><span class="hl-6">orderBy:</span><span class="hl-1"> </span><span class="hl-2">&#39;desc&#39;</span><span class="hl-1">, </span><span class="hl-6">minVersion:</span><span class="hl-1"> </span><span class="hl-2">&#39;0.9.0&#39;</span><span class="hl-1"> })</span><br/><span class="hl-1">  </span><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-6">found</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">nvim_proc</span><span class="hl-1"> = </span><span class="hl-6">child_process</span><span class="hl-1">.</span><span class="hl-0">spawn</span><span class="hl-1">(</span><span class="hl-6">found</span><span class="hl-1">.</span><span class="hl-6">matches</span><span class="hl-1">[</span><span class="hl-5">0</span><span class="hl-1">].</span><span class="hl-6">path</span><span class="hl-1">, [</span><span class="hl-2">&#39;--clean&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;--embed&#39;</span><span class="hl-1">], {});</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">nvim</span><span class="hl-1"> = </span><span class="hl-0">attach</span><span class="hl-1">({ </span><span class="hl-6">proc:</span><span class="hl-1"> </span><span class="hl-6">nvim_proc</span><span class="hl-1"> });</span><br/><br/><span class="hl-1">  </span><span class="hl-6">nvim</span><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">(</span><span class="hl-2">&#39;vsp | vsp | vsp&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">windows</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">nvim</span><span class="hl-1">.</span><span class="hl-6">windows</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">assert</span><span class="hl-1">.</span><span class="hl-0">deepStrictEqual</span><span class="hl-1">(</span><span class="hl-6">windows</span><span class="hl-1">.</span><span class="hl-6">length</span><span class="hl-1">, </span><span class="hl-5">4</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">assert</span><span class="hl-1">.</span><span class="hl-0">ok</span><span class="hl-1">(</span><span class="hl-6">windows</span><span class="hl-1">[</span><span class="hl-5">0</span><span class="hl-1">] </span><span class="hl-3">instanceof</span><span class="hl-1"> </span><span class="hl-9">nvim</span><span class="hl-1">.</span><span class="hl-9">Window</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-6">nvim</span><span class="hl-1">.</span><span class="hl-6">window</span><span class="hl-1"> = </span><span class="hl-6">windows</span><span class="hl-1">[</span><span class="hl-5">2</span><span class="hl-1">];</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">win</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">nvim</span><span class="hl-1">.</span><span class="hl-6">window</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">assert</span><span class="hl-1">.</span><span class="hl-0">ok</span><span class="hl-1">(</span><span class="hl-6">win</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1"> !== </span><span class="hl-6">windows</span><span class="hl-1">[</span><span class="hl-5">0</span><span class="hl-1">].</span><span class="hl-6">id</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-6">assert</span><span class="hl-1">.</span><span class="hl-0">deepStrictEqual</span><span class="hl-1">(</span><span class="hl-6">win</span><span class="hl-1">.</span><span class="hl-6">id</span><span class="hl-1">, </span><span class="hl-6">windows</span><span class="hl-1">[</span><span class="hl-5">2</span><span class="hl-1">].</span><span class="hl-6">id</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">buf</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">nvim</span><span class="hl-1">.</span><span class="hl-6">buffer</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">assert</span><span class="hl-1">.</span><span class="hl-0">ok</span><span class="hl-1">(</span><span class="hl-6">buf</span><span class="hl-1"> </span><span class="hl-3">instanceof</span><span class="hl-1"> </span><span class="hl-9">nvim</span><span class="hl-1">.</span><span class="hl-9">Buffer</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">lines</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">buf</span><span class="hl-1">.</span><span class="hl-6">lines</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">assert</span><span class="hl-1">.</span><span class="hl-0">deepStrictEqual</span><span class="hl-1">(</span><span class="hl-6">lines</span><span class="hl-1">, []);</span><br/><br/><span class="hl-1">  </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">buf</span><span class="hl-1">.</span><span class="hl-0">replace</span><span class="hl-1">([</span><span class="hl-2">&#39;line1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;line2&#39;</span><span class="hl-1">], </span><span class="hl-5">0</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-4">newLines</span><span class="hl-1"> = </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-6">buf</span><span class="hl-1">.</span><span class="hl-6">lines</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">assert</span><span class="hl-1">.</span><span class="hl-0">deepStrictEqual</span><span class="hl-1">(</span><span class="hl-6">newLines</span><span class="hl-1">, [</span><span class="hl-2">&#39;line1&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;line2&#39;</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">  </span><span class="hl-7">if</span><span class="hl-1"> (</span><span class="hl-6">nvim_proc</span><span class="hl-1">.</span><span class="hl-6">disconnect</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">nvim_proc</span><span class="hl-1">.</span><span class="hl-0">disconnect</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">nvim</span><span class="hl-1">.</span><span class="hl-0">quit</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-7">while</span><span class="hl-1"> (</span><span class="hl-6">nvim_proc</span><span class="hl-1">.</span><span class="hl-6">exitCode</span><span class="hl-1"> === </span><span class="hl-3">null</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">await</span><span class="hl-1"> </span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-9">Promise</span><span class="hl-1">(</span><span class="hl-6">resolve</span><span class="hl-1"> </span><span class="hl-3">=&gt;</span><span class="hl-1"> </span><span class="hl-0">setTimeout</span><span class="hl-1">(</span><span class="hl-6">resolve</span><span class="hl-1">, </span><span class="hl-5">100</span><span class="hl-1">))</span><br/><span class="hl-1">    </span><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;waiting for Nvim (pid %d) to exit&#39;</span><span class="hl-1">, </span><span class="hl-6">nvim_proc</span><span class="hl-1">.</span><span class="hl-6">pid</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;Nvim exit code: %d&#39;</span><span class="hl-1">, </span><span class="hl-6">nvim_proc</span><span class="hl-1">.</span><span class="hl-6">exitCode</span><span class="hl-1">);</span><br/><span class="hl-1">})();</span>
</code><button type="button">Copy</button></pre>

</li>
</ol>
<a id="md:create-a-remote-plugin" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Create a remote plugin<a href="#md:create-a-remote-plugin" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Neovim supports <a href="https://neovim.io/doc/user/remote_plugin.html">remote plugins</a>, which are plugins implemented as Nvim API clients.
This package contains both the &quot;API client&quot; (which talks to nvim) and &quot;remote plugin host&quot; (which discovers and runs Nvim node.js remote plugins).</p>
<p>You can define a remote plugin as a file or folder in an <code>rplugin/node/</code> directory on Nvim's <a href="https://neovim.io/doc/user/options.html#'runtimepath'">'runtimepath'</a>.
If the plugin is a folder, the <code>main</code> script from <code>package.json</code> will be loaded.</p>
<p>The plugin must export a function which takes a <code>NvimPlugin</code> object as its only parameter. You may then register autocmds, commands and functions by calling methods on the <code>NvimPlugin</code> object.
<strong>Avoid heavy initialisation or async functions at this stage,</strong> because Nvim may only be collecting information about your plugin without wishing to actually use it.
Instead, wait for one of your autocmds, commands or functions to be called before starting any processing.</p>
<a id="md:remote-plugin-examples" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Remote plugin examples<a href="#md:remote-plugin-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>See <a href="https://github.com/neovim/node-client/tree/master/examples"><code>examples/</code></a> for remote plugin examples.</p>
<a id="md:remote-plugin-api" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Remote plugin API<a href="#md:remote-plugin-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-1">  </span><span class="hl-6">NvimPlugin</span><span class="hl-1">.</span><span class="hl-6">nvim</span>
</code><button type="button">Copy</button></pre>

<p>This is the nvim api object you can use to send commands from your plugin to nvim.</p>
<pre><code class="ts"><span class="hl-1">  </span><span class="hl-6">NvimPlugin</span><span class="hl-1">.</span><span class="hl-0">setOptions</span><span class="hl-1">(</span><span class="hl-6">options</span><span class="hl-1">: </span><span class="hl-6">NvimPluginOptions</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-9">NvimPluginOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">dev</span><span class="hl-1">?: </span><span class="hl-9">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">alwaysInit</span><span class="hl-1">?: </span><span class="hl-9">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span>
</code><button type="button">Copy</button></pre>

<p>Set your plugin to dev mode, which will cause the module to be reloaded on each invocation.
<code>alwaysInit</code> will always attempt to attempt to re-instantiate the plugin. e.g. your plugin class will
always get called on each invocation of your plugin's command.</p>
<pre><code class="ts"><span class="hl-1">  </span><span class="hl-6">NvimPlugin</span><span class="hl-1">.</span><span class="hl-0">registerAutocmd</span><span class="hl-1">(</span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">fn</span><span class="hl-1">: </span><span class="hl-6">Function</span><span class="hl-1">, </span><span class="hl-6">options</span><span class="hl-1">: </span><span class="hl-6">AutocmdOptions</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">NvimPlugin</span><span class="hl-1">.</span><span class="hl-0">registerAutocmd</span><span class="hl-1">(</span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">fn</span><span class="hl-1">: [</span><span class="hl-6">any</span><span class="hl-1">, </span><span class="hl-6">Function</span><span class="hl-1">], </span><span class="hl-6">options</span><span class="hl-1">: </span><span class="hl-6">AutocmdOptions</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-9">AutocmdOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">pattern</span><span class="hl-1">: </span><span class="hl-9">string</span><span class="hl-1">;  </span><span class="hl-8">// See `:help autocmd-pattern`.</span><br/><span class="hl-1">    </span><span class="hl-6">eval</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;    </span><span class="hl-8">// Vimscript expression evaluated by the Nvim peer.</span><br/><span class="hl-1">    </span><span class="hl-6">sync</span><span class="hl-1">?: </span><span class="hl-9">boolean</span><span class="hl-1">;   </span><span class="hl-8">// Force blocking (non-async) behavior.</span><br/><span class="hl-1">  }</span>
</code><button type="button">Copy</button></pre>

<p>Registers an autocmd for the event <code>name</code>, calling your function <code>fn</code> with <code>options</code>. Pattern is the only required option. If you wish to call a method on an object you may pass <code>fn</code> as an array of <code>[object, object.method]</code>.</p>
<p>By default autocmds, commands and functions are all treated as asynchronous and should return <code>Promises</code> (or should be <code>async</code> functions).</p>
<pre><code class="ts"><span class="hl-1">  </span><span class="hl-6">NvimPlugin</span><span class="hl-1">.</span><span class="hl-0">registerCommand</span><span class="hl-1">(</span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">fn</span><span class="hl-1">: </span><span class="hl-6">Function</span><span class="hl-1">, </span><span class="hl-6">options</span><span class="hl-1">?: </span><span class="hl-6">CommandOptions</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">NvimPlugin</span><span class="hl-1">.</span><span class="hl-0">registerCommand</span><span class="hl-1">(</span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">fn</span><span class="hl-1">: [</span><span class="hl-6">any</span><span class="hl-1">, </span><span class="hl-6">Function</span><span class="hl-1">], </span><span class="hl-6">options</span><span class="hl-1">?: </span><span class="hl-6">CommandOptions</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-9">CommandOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">sync</span><span class="hl-1">?: </span><span class="hl-9">boolean</span><span class="hl-1">;   </span><span class="hl-8">// Force blocking (non-async) behavior.</span><br/><span class="hl-1">    </span><span class="hl-6">range</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;   </span><span class="hl-8">// See `:help :range`.</span><br/><span class="hl-1">    </span><span class="hl-6">nargs</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;   </span><span class="hl-8">// See `:help :command-nargs`.</span><br/><span class="hl-1">  }</span>
</code><button type="button">Copy</button></pre>

<p>Registers a command named by <code>name</code>, calling function <code>fn</code> with <code>options</code>. This will be invoked from nvim by entering <code>:name</code> in normal mode.</p>
<pre><code class="ts"><span class="hl-1">  </span><span class="hl-6">NvimPlugin</span><span class="hl-1">.</span><span class="hl-0">registerFunction</span><span class="hl-1">(</span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">fn</span><span class="hl-1">: </span><span class="hl-6">Function</span><span class="hl-1">, </span><span class="hl-6">options</span><span class="hl-1">?: </span><span class="hl-6">NvimFunctionOptions</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">NvimPlugin</span><span class="hl-1">.</span><span class="hl-0">registerFunction</span><span class="hl-1">(</span><span class="hl-6">name</span><span class="hl-1">: </span><span class="hl-6">string</span><span class="hl-1">, </span><span class="hl-6">fn</span><span class="hl-1">: [</span><span class="hl-6">any</span><span class="hl-1">, </span><span class="hl-6">Function</span><span class="hl-1">], </span><span class="hl-6">options</span><span class="hl-1">?: </span><span class="hl-6">NvimFunctionOptions</span><span class="hl-1">): </span><span class="hl-3">void</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-3">interface</span><span class="hl-1"> </span><span class="hl-9">NvimFunctionOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">sync</span><span class="hl-1">?: </span><span class="hl-9">boolean</span><span class="hl-1">;   </span><span class="hl-8">// Force blocking (non-async) behavior.</span><br/><span class="hl-1">    </span><span class="hl-6">range</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;   </span><span class="hl-8">// See `:help :range`.</span><br/><span class="hl-1">    </span><span class="hl-6">eval</span><span class="hl-1">?: </span><span class="hl-9">string</span><span class="hl-1">;    </span><span class="hl-8">// Vimscript expression evaluated by the Nvim peer.</span><br/><span class="hl-1">  }</span>
</code><button type="button">Copy</button></pre>

<p>Registers a function with name <code>name</code>, calling function <code>fn</code> with <code>options</code>. This will be invoked from nvim by entering eg <code>:call name()</code> in normal mode.</p>
<a id="md:debug--troubleshoot" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Debug / troubleshoot<a href="#md:debug--troubleshoot" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For debugging and configuring logging, you can set the following environment variables which are used by the <code>neovim</code> package (or <code>nvim</code> itself where noted):</p>
<ul>
<li><code>NVIM_NODE_HOST_DEBUG</code>: Spawns the node process that calls <code>neovim-client-host</code> with <code>--inspect-brk</code> so you can have a debugger.
Pair that with this <a href="https://chrome.google.com/webstore/detail/nodejs-v8-inspector-manag/gnhhdgbaldcilmgcpfddgdbkhjohddkj?hl=en">Node Inspector Manager Chrome plugin</a></li>
<li>Logging: Logging is done using <code>winston</code> through the <code>logger</code> module. This package replaces <code>console</code> with this interface.
<ul>
<li><code>NVIM_NODE_LOG_LEVEL</code>: Sets the logging level for winston. Default is <code>debug</code>.
Available levels: <code>{ error: 0, warn: 1, info: 2, verbose: 3, debug: 4, silly: 5 }</code></li>
<li><code>NVIM_NODE_LOG_FILE</code>: Sets the log file path.</li>
</ul>
</li>
<li>Usage through node REPL
<ul>
<li><code>NVIM_LISTEN_ADDRESS</code>:
<ol>
<li>Start Nvim with a known address (or use the $NVIM_LISTEN_ADDRESS of a running instance):<pre><code><span class="hl-6">$</span><span class="hl-1"> </span><span class="hl-4">NVIM_LISTEN_ADDRESS</span><span class="hl-1">=/</span><span class="hl-6">tmp</span><span class="hl-1">/</span><span class="hl-6">nvim</span><span class="hl-1"> </span><span class="hl-6">nvim</span>
</code><button>Copy</button></pre>

</li>
<li>In another terminal, connect a node REPL to Nvim<pre><code class="javascript"><span class="hl-8">// `scripts/nvim` will detect if `NVIM_LISTEN_ADDRESS` is set and use that unix socket</span><br/><span class="hl-8">// Otherwise will create an embedded `nvim` instance</span><br/><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&#39;neovim/scripts/nvim&#39;</span><span class="hl-1">).</span><span class="hl-0">then</span><span class="hl-1">((</span><span class="hl-6">nvim</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">nvim</span><span class="hl-1">.</span><span class="hl-0">command</span><span class="hl-1">(</span><span class="hl-2">&#39;vsp&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</li>
</ol>
</li>
</ul>
</li>
</ul>
<p>See the tests and <a href="https://github.com/neovim/node-client/tree/master/packages/neovim/scripts"><code>scripts</code></a> for more examples.</p>
<a id="md:develop" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Develop<a href="#md:develop" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>After cloning the repo, run <code>npm install</code> to install dev dependencies. The main <code>neovim</code> library is in <code>packages/neovim</code>.</p>
<a id="md:run-tests" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Run tests<a href="#md:run-tests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code>npm run build &amp;&amp; NVIM_NODE_LOG_FILE=log npm run test
</code></pre>
<a id="md:maintain" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Maintain<a href="#md:maintain" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:release" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Release<a href="#md:release" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Only maintainers of the <a href="https://www.npmjs.com/package/neovim">neovim NPM package</a> can publish a release. Follow these steps to publish a release:</p>
<ol>
<li>Update <code>CHANGELOG.md</code>.</li>
<li>Update version. Build and publish the package. Tag the release and push.<pre><code class="bash"><span class="hl-8"># Choose major/minor/patch as needed.</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">version</span><span class="hl-1"> </span><span class="hl-3">--no-git-tag-version</span><span class="hl-1"> </span><span class="hl-2">patch</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">version</span><span class="hl-1"> </span><span class="hl-3">-w</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/</span><span class="hl-1"> </span><span class="hl-2">patch</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">package</span><span class="hl-3">*</span><span class="hl-2">.json</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/package.json</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">commit</span><span class="hl-1"> </span><span class="hl-3">-m</span><span class="hl-1"> </span><span class="hl-2">&#39;release&#39;</span><br/><span class="hl-8"># Note: this copies the top-level README.md/CHANGELOG.md to packages/neovim/.</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">publish:neovim</span><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-6">_VERSION</span><span class="hl-1">=$(</span><span class="hl-0">grep</span><span class="hl-1"> </span><span class="hl-3">-o</span><span class="hl-1"> </span><span class="hl-2">&#39;version&quot;: &quot;[^&quot;]\+&#39;</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/package.json</span><span class="hl-1"> | </span><span class="hl-0">sed</span><span class="hl-1"> </span><span class="hl-2">&#39;s/.*&quot;//&#39;</span><span class="hl-1">)</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">tag</span><span class="hl-1"> </span><span class="hl-2">&quot;v${</span><span class="hl-6">_VERSION</span><span class="hl-2">}&quot;</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">push</span><span class="hl-1"> </span><span class="hl-3">--tags</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">push</span>
</code><button type="button">Copy</button></pre>

</li>
<li>Post-release tasks:
<ul>
<li>Add stub to <code>CHANGELOG.md</code>.</li>
<li>Bump and commit.<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">version</span><span class="hl-1"> </span><span class="hl-3">--no-git-tag-version</span><span class="hl-1"> </span><span class="hl-2">prerelease</span><span class="hl-1"> </span><span class="hl-3">--preid</span><span class="hl-1"> </span><span class="hl-2">dev</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">version</span><span class="hl-1"> </span><span class="hl-3">-w</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/</span><span class="hl-1"> </span><span class="hl-3">--no-git-tag-version</span><span class="hl-1"> </span><span class="hl-2">prerelease</span><span class="hl-1"> </span><span class="hl-3">--preid</span><span class="hl-1"> </span><span class="hl-2">dev</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-2">package</span><span class="hl-3">*</span><span class="hl-2">.json</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/package.json</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">commit</span><span class="hl-1"> </span><span class="hl-3">-m</span><span class="hl-1"> </span><span class="hl-2">bump</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">push</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
</li>
</ol>
<a id="md:regenerate-documentation-website" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Regenerate documentation website<a href="#md:regenerate-documentation-website" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The docs website is currently not automated. Follow these steps to regenerate it:</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">run</span><span class="hl-1"> </span><span class="hl-2">doc</span><span class="hl-1"> </span><span class="hl-3">-w</span><span class="hl-1"> </span><span class="hl-2">packages/neovim</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">checkout</span><span class="hl-1"> </span><span class="hl-2">gh-pages</span><br/><span class="hl-0">mv</span><span class="hl-1"> </span><span class="hl-3">-f</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/doc/assets/</span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-2">assets/</span><br/><span class="hl-0">mv</span><span class="hl-1"> </span><span class="hl-3">-f</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/doc/classes/</span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-2">classes/</span><br/><span class="hl-0">mv</span><span class="hl-1"> </span><span class="hl-3">-f</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/doc/functions/</span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-2">functions/</span><br/><span class="hl-0">mv</span><span class="hl-1"> </span><span class="hl-3">-f</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/doc/types/</span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-2">types/</span><br/><span class="hl-0">mv</span><span class="hl-1"> </span><span class="hl-2">packages/neovim/doc/</span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-2">.</span><br/><span class="hl-0">rm</span><span class="hl-1"> </span><span class="hl-3">-r</span><span class="hl-1"> </span><span class="hl-2">packages/</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">add</span><span class="hl-1"> </span><span class="hl-3">*</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">commit</span><span class="hl-1"> </span><span class="hl-3">-m</span><span class="hl-1"> </span><span class="hl-2">&#39;publish docs&#39;</span><br/><span class="hl-0">git</span><span class="hl-1"> </span><span class="hl-2">push</span><span class="hl-1"> </span><span class="hl-2">origin</span><span class="hl-1"> </span><span class="hl-2">HEAD:gh-pages</span>
</code><button type="button">Copy</button></pre>

<a id="md:contributors" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Contributors<a href="#md:contributors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="https://github.com/billyvg">@billyvg</a> for rewrite</li>
<li><a href="https://github.com/mhartington">@mhartington</a> for TypeScript rewrite</li>
<li><a href="https://github.com/fritzy">@fritzy</a> for transferring over the npm package repo <code>neovim</code>!</li>
<li><a href="https://github.com/rhysd">@rhysd</a>, <a href="https://github.com/tarruda">@tarruda</a>, <a href="https://github.com/nhynes">@nhynes</a> on work for the original <code>node-client</code></li>
<li><a href="https://github.com/justinmk">@justinmk</a> Neovim maintainer</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:neovim-nodejs-client"><span>Neovim node.js client</span></a><ul><li><a href="#md:install"><span>Install</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:functions"><span>Functions</span></a></li><li><a href="#md:logging"><span>Logging</span></a></li><li><a href="#md:quickstart-connect-to-nvim"><span>Quickstart: connect to <wbr/>Nvim</span></a></li><li><a href="#md:create-a-remote-plugin"><span>Create a remote plugin</span></a></li><li><a href="#md:remote-plugin-examples"><span>Remote plugin examples</span></a></li><li><a href="#md:remote-plugin-api"><span>Remote plugin API</span></a></li></ul></li><li><a href="#md:debug--troubleshoot"><span>Debug / troubleshoot</span></a></li><li><a href="#md:develop"><span>Develop</span></a></li><li><ul><li><a href="#md:run-tests"><span>Run tests</span></a></li></ul></li><li><a href="#md:maintain"><span>Maintain</span></a></li><li><ul><li><a href="#md:release"><span>Release</span></a></li><li><a href="#md:regenerate-documentation-website"><span>Regenerate documentation website</span></a></li></ul></li><li><a href="#md:contributors"><span>Contributors</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>neovim</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
